{{ define "main" }}
<div class="single-page-layout"> <!-- New wrapper class -->
  <article class="single-article">
    <h1>{{ .Title }}</h1>
    
    {{/* Testimonial logic (preserved) */}}
    {{ if .Params.categories }}
      {{ $matchingTestimonials := where (index .Site.Data "testimonials") "category" "in" .Params.categories }}
      {{ with $matchingTestimonials }}
      <div class="testimonial-service-grid">
        {{ range first 2 . }}
          <div class="testimonial-service-item">
            <blockquote>{{ .quote | $.Page.RenderString }}</blockquote>
            <footer>â€” <i>{{ .name }}</i>{{ with .role }}, {{ . }}{{ end }}</footer>
          </div>
        {{ end }}
      </div>
      {{ end }}
    {{ end }}

    {{/* Process YAML data */}}
    {{ $data := index .Site.Data .Params.data }}
    {{ range $data }}
      <section class="service-section {{ .category }}"> <!-- Added category class -->
        <h4>{{ .head }}</h4>

        {{/* Standard content blocks */}}
        {{ if eq .category "origin" "offer" "story" }}
          <div class="service-content">
            {{ .content | $.Page.RenderString }}
          </div>

        {{/* Grid layout for multi-entry sections */}}
        {{ else if eq .category "niche" }}
          <div class="service-grid">
            {{ range .entries }}
              <div class="service-card">
                <h4>{{ .entry_one }}</h4>
                <p>{{ .blah | $.Page.RenderString }}</p>
              </div>
            {{ end }}
          </div>

        {{ else if eq .category "pricing" }}
          <div class="service-grid">
            {{ range .packages }}
              <div class="service-card">
                <h4>{{ .title }}</h4>
                <h4>{{ .subtitle }}</h4>
                <p>{{ .content | $.Page.RenderString }}</p>
                <div class="price">{{ .price | $.Page.RenderString }}</div>
              </div>
            {{ end }}
          </div>

        {{/* Other layouts */}}
        {{ else if eq .category "outcomes" }}
          <div class="outcomes-split">
            <div class="outcomes-left">{{ .content_left | $.Page.RenderString }}</div>
            <div class="outcomes-right">
              <h4>{{ .content_right_head }}</h4>
              {{ .content_right | $.Page.RenderString }}
            </div>
          </div>
        {{ end }}
      </section>
    {{ end }}
  </article>
</div>
{{ end }}